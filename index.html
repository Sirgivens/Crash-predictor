<!DOCTYPE html>
<html>
<head>
  <title>Crash Analyzer</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f9f9f9; color: #333; }
    input, button { padding: 8px; margin: 5px; }
    .stat { margin: 10px 0; font-weight: bold; }
  </style>
</head>
<body>
  <h2>Crash Analyzer</h2>
  <input type="number" id="newCrash" step="0.01" placeholder="Enter latest crash multiplier">
  <button onclick="addCrash()">Add</button>
  <button onclick="resetData()">Reset</button>

  <div id="history"></div>
  <div id="stats"></div>
  <div id="advice"></div>

  <script>
    let crashData = JSON.parse(localStorage.getItem('crashData')) || [];

    function addCrash() {
      const input = document.getElementById('newCrash');
      const val = parseFloat(input.value);
      if (!isNaN(val)) {
        crashData.push(val);
        if (crashData.length > 10) crashData.shift();
        localStorage.setItem('crashData', JSON.stringify(crashData));
        input.value = '';
        updateUI();
      }
    }

    function resetData() {
      crashData = [];
      localStorage.removeItem('crashData');
      updateUI();
    }

    function updateUI() {
      const historyEl = document.getElementById('history');
      const statsEl = document.getElementById('stats');
      const adviceEl = document.getElementById('advice');

      if (crashData.length === 0) {
        historyEl.innerHTML = "No data yet.";
        statsEl.innerHTML = "";
        adviceEl.innerHTML = "";
        return;
      }

      historyEl.innerHTML = `<strong>Last ${crashData.length} crashes:</strong> ${crashData.join(', ')}`;

      const min = Math.min(...crashData);
      const max = Math.max(...crashData);
      const avg = crashData.reduce((a, b) => a + b, 0) / crashData.length;
      const risky = crashData.filter(n => n < 2).length;

      statsEl.innerHTML = `
        <div class="stat">Average: ${avg.toFixed(2)}</div>
        <div class="stat">Lowest: ${min.toFixed(2)}</div>
        <div class="stat">Highest: ${max.toFixed(2)}</div>
        <div class="stat">Crashes under 2x: ${risky} of ${crashData.length}</div>
      `;

      let riskLevel = 'Stable';
      if (risky >= 7) {
        riskLevel = 'High Risk — many early crashes';
      } else if (risky >= 4) {
        riskLevel = 'Mixed Risk — be cautious';
      }

      adviceEl.innerHTML = `<div class="stat">Risk Level: ${riskLevel}</div>`;
    }

    updateUI();
  </script>
</body>
</html>
